{% extends "newbase.html" %}
{% load custom_filters %}


{% block content %}
	<h1>Dashboard</h1>
	{% if main_feature_text or secondary_feature_text %}
	<div class="row">
		<div class="col-sm-12">
			<div class="dashboard">
				{% if main_feature_text %}<h2>{{ main_feature_text }}</h2>{% endif %}
				{% if secondary_feature_text %}<p class="lead">{{ secondary_feature_text }}</p>{% endif %}
			</div>
		</div>
	</div>
	{% endif %}
	<div class="row">
		<div class="col-sm-4">
			<div class="dashboard">
				<h1>{{ student.current_assigned_activities.count|default:0 }}</h1>
				<p class="lead">{{ student.current_assigned_activities.count|plural:"activity" }} assigned to me</p>
				{% if student.current_assigned_activities.count %}<a class="action" href="{% url "activity-mine" %}">View activities</a>{% else %}{% if block_count %}<a class="action">Choose from available blocks</a>{% else %}<p class="action">Please check back later</p>{% endif %}{% endif %}
			</div>
		</div>
		<div class="col-sm-4">
			<div class="dashboard">
				<h1>{{ block_count}}</h1>
				<p class="lead">block{{ block_count|pluralize }} open for signups</p>
				{% if block_count %}<a class="action" href="{{ open_block_view_url }}">All blocks</a>{% else %}<p class="action">Please check back later</p>{% endif %}
			</div>
		</div>
		<div class="col-sm-4">
			<div class="dashboard">
					{% if student.latest_quiz_attempt %}
					<h1>{{ student.latest_quiz_attempt.percent_score|floatformat|default:"-" }}%</h1>
					<p class="lead">scored on your last quiz</p>
					<a class="action" href="{% url "quiz-attempt-report" slug=student.latest_quiz_attempt.slug %}">View details</a>
					{% else %}
					<h1>-</h1>
					<p class="lead">No quiz scores available</p>
					<a class="action" href="{% url "quiz-spec" slug=example_quiz_slug %}">Try an example quiz</a>
					{% endif %}
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			<div class="dashboard">
				<h2>Interested in seeing questions for previous blocks?</h2>
				{% if released_block_count %}
					<p class="lead">Click the link below to view all the questions you have access to.</p>
					<a class="action" href="{{ released_block_view_url }}">View released blocks</a>
				{% else %}
					<p class="lead">Unfortunately there are no blocks released which you can view right now.</p>
					<p class="action">Please check again later.</p>
				{% endif %}
			</div>
		</div>
	</div>
{% endblock content %}